(
echo -- Drop existing tables

echo DROP TABLE IF EXISTS annotations;
echo DROP TABLE IF EXISTS lyrics;
echo DROP TABLE IF EXISTS songs;

echo. 

echo -- Song table

echo CREATE TABLE songs (

echo 	song_id INTEGER PRIMARY KEY AUTOINCREMENT,
echo 	title VARCHAR(255) NOT NULL,
echo 	artist VARCHAR(255),
echo 	album VARCHAR(255),
echo 	file_path VARCHAR(500) NOT NULL,
echo 	date_added DATETIME DEFAULT CURRENT_TIMESTAMP
echo);
echo.

echo -- Lyrics table

echo CREATE TABLE lyrics (

echo 	lyric_id INTEGER PRIMARY KEY AUTOINCREMENT,
echo 	song_id INTEGER NOT NULL,
echo 	timestamp VARCHAR(20) NOT NULL,
echo 	lyric_text TEXT NOT NULL,
echo 	line_number INTEGER NOT NULL,
echo 	FOREIGN KEY (song_id) REFERENCES songs(song_id) ON DELETE CASCADE
echo);
echo.

echo -- Annotations table

echo CREATE TABLE annotations (
echo 	annotation_id INTEGER PRIMARY KEY AUTOINCREMENT,
echo 	lyric_id INTEGER NOT NULL,
echo 	annotation_text TEXT NOT NULL,
echo 	date_created DATETIME DEFAULT CURRENT_TIMESTAMP,
echo 	date_modified DATETIME DEFAULT CURRENT_TIMESTAMP,
echo 	FOREIGN KEY (lyric_id) REFERENCES lyrics(lyric_id) ON DELETE CASCADE
echo);
echo.

echo -- Indexes for quick search
echo 	CREATE INDEX index_lyrics_songs ON lyrics(song_id);
echo 	CREATE INDEX index_annotations_lyrics ON annotations(lyric_id);
echo 	CREATE INDEX index_annotations_date ON annotations(date_created);) > src\database\schema.sql

